(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,a=window.wp.element,n=(0,a.createContext)({path:"/",navigate:()=>{}}),l=({children:e})=>{const[l,r]=(0,a.useState)(window.location.hash.substr(1)||"/");return(0,a.useEffect)(()=>{const e=()=>{r(window.location.hash.substr(1)||"/")};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]),(0,t.createElement)(n.Provider,{value:{path:l,navigate:e=>{window.location.hash=e}}},e)},r=({to:e,children:a,className:n})=>(0,t.createElement)("a",{href:`#${e}`,className:n,style:{cursor:"pointer",color:"#0073aa",textDecoration:"none"}},a),i=({children:e})=>(0,t.createElement)("div",{className:"practicerx-layout",style:{display:"flex",minHeight:"100vh"}},(0,t.createElement)("div",{className:"practicerx-sidebar",style:{width:"200px",background:"#fff",borderRight:"1px solid #ddd",padding:"20px"}},(0,t.createElement)("h2",null,"PracticeRx"),(0,t.createElement)("nav",null,(0,t.createElement)("ul",{style:{listStyle:"none",padding:0}},(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/"},"Dashboard")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/appointments"},"Appointments")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/patients"},"Clients")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/telehealth"},"Telehealth")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/campaigns"},"Campaigns")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/recipes"},"Recipes")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/meal-plans"},"Meal Plans")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/forms"},"Forms")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/documents"},"Documents")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/health-tracking"},"Health Tracking")),(0,t.createElement)("li",{style:{marginBottom:"10px"}},(0,t.createElement)(r,{to:"/settings"},"Settings"))))),(0,t.createElement)("div",{className:"practicerx-content",style:{flex:1,padding:"20px"}},e)),o=window.wp.apiFetch;var d=e.n(o);const s=()=>{const[e,n]=(0,a.useState)(!1),[l,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{d()({path:"/ppms/v1/patients"}).then(e=>{0===e.length&&n(!0)})},[]),(0,t.createElement)("div",{className:"practicerx-page"},(0,t.createElement)("h1",null,"Dashboard"),(0,t.createElement)("p",null,"Welcome to PracticeRx."),e&&(0,t.createElement)("div",{className:"notice notice-info inline",style:{padding:"15px",margin:"20px 0"}},(0,t.createElement)("h3",null,"Get Started Quickly"),(0,t.createElement)("p",null,"It looks like this is a fresh installation. Would you like to import some demo data to explore the system?"),(0,t.createElement)("button",{className:"button button-primary",onClick:()=>{r(!0),d()({path:"/ppms/v1/system/seed",method:"POST"}).then(()=>{n(!1),alert("Demo data imported successfully! Refresh the page to see it.")}).catch(e=>{console.error(e),alert("Import failed.")}).finally(()=>r(!1))},disabled:l},l?"Importing...":"Import Demo Data")))},p=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{const e=(new Date).toISOString().split("T")[0],t=new Date((new Date).setDate((new Date).getDate()+30)).toISOString().split("T")[0];d()({path:`/ppms/v1/appointments?start_date=${e}&end_date=${t}`}).then(e=>n(e)).catch(e=>console.error(e)).finally(()=>r(!1))},[]),l?(0,t.createElement)("div",null,"Loading calendar..."):(0,t.createElement)("div",{className:"practicerx-calendar"},(0,t.createElement)("h3",null,"Upcoming Appointments"),0===e.length?(0,t.createElement)("p",null,"No appointments found."):(0,t.createElement)("ul",null,e.map(e=>(0,t.createElement)("li",{key:e.id},e.start_time," - ",e.status))))},c=()=>(0,t.createElement)("div",{className:"practicerx-page"},(0,t.createElement)("h1",null,"Appointments"),(0,t.createElement)("p",null,"Manage your schedule here."),(0,t.createElement)(p,null)),m=()=>{const[e,n]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{d()({path:"/ppms/v1/patients"}).then(e=>n(e)).catch(e=>console.error(e)).finally(()=>i(!1))},[]),l?(0,t.createElement)("div",null,"Loading patients..."):(0,t.createElement)("div",{className:"practicerx-patient-list"},(0,t.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,"ID"),(0,t.createElement)("th",null,"Phone"),(0,t.createElement)("th",null,"Gender"),(0,t.createElement)("th",null,"Actions"))),(0,t.createElement)("tbody",null,e.map(e=>(0,t.createElement)("tr",{key:e.id},(0,t.createElement)("td",null,e.id),(0,t.createElement)("td",null,e.phone),(0,t.createElement)("td",null,e.gender),(0,t.createElement)("td",null,(0,t.createElement)(r,{to:`/patients/${e.id}`},"View")))))))},u=()=>(0,t.createElement)("div",{className:"practicerx-page"},(0,t.createElement)("h1",null,"Patients"),(0,t.createElement)("p",null,"View and manage patient records."),(0,t.createElement)(m,null)),g=({patientId:e,onSave:n})=>{const[l,r]=(0,a.useState)(""),[i,o]=(0,a.useState)("general"),[s,p]=(0,a.useState)(!1);return(0,t.createElement)("div",{className:"practicerx-encounter-form",style:{marginTop:"20px",padding:"15px",background:"#f9f9f9",border:"1px solid #ddd"}},(0,t.createElement)("h4",null,"Add Clinical Note"),(0,t.createElement)("form",{onSubmit:t=>{t.preventDefault(),p(!0),d()({path:"/ppms/v1/encounters",method:"POST",data:{patient_id:e,practitioner_id:window.practicerxSettings?.currentUserId||1,type:i,content:l}}).then(e=>{r(""),n&&n(e)}).catch(e=>{console.error(e),alert("Failed to save encounter.")}).finally(()=>{p(!1)})}},(0,t.createElement)("div",{className:"form-group",style:{marginBottom:"10px"}},(0,t.createElement)("label",{style:{display:"block"}},"Type"),(0,t.createElement)("select",{value:i,onChange:e=>o(e.target.value),style:{width:"100%"}},(0,t.createElement)("option",{value:"general"},"General Note"),(0,t.createElement)("option",{value:"soap"},"SOAP Note"),(0,t.createElement)("option",{value:"assessment"},"Assessment"),(0,t.createElement)("option",{value:"prescription"},"Prescription"))),(0,t.createElement)("div",{className:"form-group",style:{marginBottom:"10px"}},(0,t.createElement)("label",{style:{display:"block"}},"Content"),(0,t.createElement)("textarea",{value:l,onChange:e=>r(e.target.value),rows:"5",required:!0,style:{width:"100%"}})),(0,t.createElement)("button",{type:"submit",disabled:s,className:"button button-primary"},s?"Saving...":"Save Note")))},x=({id:e})=>{const[n,l]=(0,a.useState)(null),[r,i]=(0,a.useState)([]),[o,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{Promise.all([d()({path:`/ppms/v1/patients/${e}`}),d()({path:`/ppms/v1/patients/${e}/encounters`})]).then(e=>{l(e[0]),i(e[1])}).catch(e=>{console.error(e)}).finally(()=>{s(!1)})},[e]),o?(0,t.createElement)("div",null,"Loading patient details..."):n?(0,t.createElement)("div",{className:"practicerx-page practicerx-patient-detail"},(0,t.createElement)("div",{className:"patient-header"},(0,t.createElement)("h1",null,"Patient #",n.id),(0,t.createElement)("div",{className:"patient-info"},(0,t.createElement)("p",null,(0,t.createElement)("strong",null,"Phone:")," ",n.phone),(0,t.createElement)("p",null,(0,t.createElement)("strong",null,"Gender:")," ",n.gender),(0,t.createElement)("p",null,(0,t.createElement)("strong",null,"DOB:")," ",n.dob))),(0,t.createElement)("div",{className:"patient-content"},(0,t.createElement)("div",{className:"encounters-section"},(0,t.createElement)("h3",null,"Clinical History"),(0,t.createElement)(g,{patientId:n.id,onSave:e=>{i([e,...r])}}),(0,t.createElement)("div",{className:"encounters-list",style:{marginTop:"20px"}},r.map(e=>(0,t.createElement)("div",{key:e.id,className:"encounter-card",style:{background:"#fff",border:"1px solid #ddd",padding:"15px",marginBottom:"10px"}},(0,t.createElement)("div",{className:"encounter-meta",style:{borderBottom:"1px solid #eee",paddingBottom:"5px",marginBottom:"5px",fontSize:"0.9em",color:"#666"}},(0,t.createElement)("span",{className:"type",style:{textTransform:"uppercase",fontWeight:"bold",marginRight:"10px"}},e.type),(0,t.createElement)("span",{className:"date"},new Date(e.created_at).toLocaleDateString())),(0,t.createElement)("div",{className:"encounter-body",style:{whiteSpace:"pre-wrap"}},e.content))))))):(0,t.createElement)("div",null,"Patient not found.")},y=()=>(0,t.createElement)("div",{className:"practicerx-page"},(0,t.createElement)("h1",null,"Settings"),(0,t.createElement)("p",null,"Configure your practice settings.")),E=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[s,p]=(0,a.useState)({client_id:"",practitioner_id:"",appointment_id:"",provider:"zoom",scheduled_for:""});(0,a.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await d()({path:"/ppms/v1/telehealth/sessions"});n(e.data||[])}catch(e){console.error("Error loading sessions:",e)}finally{r(!1)}};return l?(0,t.createElement)("div",null,"Loading sessions..."):(0,t.createElement)("div",null,(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},(0,t.createElement)("h1",null,"Telehealth Sessions"),(0,t.createElement)("button",{onClick:()=>o(!i),style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},i?"Cancel":"Schedule Session")),i&&(0,t.createElement)("div",{style:{background:"#fff",padding:"20px",marginBottom:"20px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("h2",null,"Schedule Video Session"),(0,t.createElement)("form",{onSubmit:async e=>{e.preventDefault();try{await d()({path:"/ppms/v1/telehealth/sessions",method:"POST",data:s}),o(!1),p({client_id:"",practitioner_id:"",appointment_id:"",provider:"zoom",scheduled_for:""}),c()}catch(e){alert("Error creating session: "+e.message)}}},(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Client ID"),(0,t.createElement)("input",{type:"number",value:s.client_id,onChange:e=>p({...s,client_id:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Practitioner ID"),(0,t.createElement)("input",{type:"number",value:s.practitioner_id,onChange:e=>p({...s,practitioner_id:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Appointment ID (optional)"),(0,t.createElement)("input",{type:"number",value:s.appointment_id,onChange:e=>p({...s,appointment_id:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Provider"),(0,t.createElement)("select",{value:s.provider,onChange:e=>p({...s,provider:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("option",{value:"zoom"},"Zoom"),(0,t.createElement)("option",{value:"twilio"},"Twilio Video"))),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Scheduled For"),(0,t.createElement)("input",{type:"datetime-local",value:s.scheduled_for,onChange:e=>p({...s,scheduled_for:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("button",{type:"submit",style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"Create Session"))),(0,t.createElement)("div",{style:{background:"#fff",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden"}},(0,t.createElement)("table",{style:{width:"100%",borderCollapse:"collapse"}},(0,t.createElement)("thead",null,(0,t.createElement)("tr",{style:{background:"#f7f7f7"}},(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"ID"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Client"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Provider"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Scheduled"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Status"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Actions"))),(0,t.createElement)("tbody",null,0===e.length?(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:"6",style:{padding:"20px",textAlign:"center",color:"#666"}},"No sessions scheduled")):e.map(e=>{return(0,t.createElement)("tr",{key:e.id,style:{borderBottom:"1px solid #f0f0f0"}},(0,t.createElement)("td",{style:{padding:"12px"}},e.id),(0,t.createElement)("td",{style:{padding:"12px"}},"Client #",e.client_id),(0,t.createElement)("td",{style:{padding:"12px"}},e.provider),(0,t.createElement)("td",{style:{padding:"12px"}},e.scheduled_for),(0,t.createElement)("td",{style:{padding:"12px"}},(a=e.status,(0,t.createElement)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",color:"#fff",background:{scheduled:"#ffa500","in-progress":"#00aa00",completed:"#0066cc",cancelled:"#cc0000"}[a]||"#666"}},a))),(0,t.createElement)("td",{style:{padding:"12px"}},e.join_url&&(0,t.createElement)("a",{href:e.join_url,target:"_blank",rel:"noopener noreferrer",style:{marginRight:"10px",color:"#0073aa",textDecoration:"none"}},"Join"),"in-progress"===e.status&&(0,t.createElement)("button",{onClick:()=>(async e=>{if(confirm("End this session?"))try{await d()({path:`/ppms/v1/telehealth/sessions/${e}/end`,method:"POST"}),c()}catch(e){alert("Error ending session: "+e.message)}})(e.id),style:{padding:"4px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"End")));var a})))))},b=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[s,p]=(0,a.useState)(null),[c,m]=(0,a.useState)({name:"",description:"",trigger_type:"manual",trigger_event:"",emails:[{subject:"",body:"",delay_days:0}],is_active:!0});(0,a.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await d()({path:"/ppms/v1/campaigns"});n(e.data||[])}catch(e){console.error("Error loading campaigns:",e)}finally{r(!1)}},g=()=>{m({name:"",description:"",trigger_type:"manual",trigger_event:"",emails:[{subject:"",body:"",delay_days:0}],is_active:!0}),p(null),o(!1)},x=(e,t,a)=>{const n=[...c.emails];n[e][t]=a,m({...c,emails:n})};return l?(0,t.createElement)("div",null,"Loading campaigns..."):(0,t.createElement)("div",null,(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},(0,t.createElement)("h1",null,"Email Campaigns"),(0,t.createElement)("button",{onClick:()=>o(!i),style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},i?"Cancel":"New Campaign")),i&&(0,t.createElement)("div",{style:{background:"#fff",padding:"20px",marginBottom:"20px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("h2",null,s?"Edit Campaign":"Create Campaign"),(0,t.createElement)("form",{onSubmit:async e=>{e.preventDefault();try{s?await d()({path:`/ppms/v1/campaigns/${s}`,method:"PUT",data:c}):await d()({path:"/ppms/v1/campaigns",method:"POST",data:c}),g(),u()}catch(e){alert("Error saving campaign: "+e.message)}}},(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Campaign Name"),(0,t.createElement)("input",{type:"text",value:c.name,onChange:e=>m({...c,name:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Description"),(0,t.createElement)("textarea",{value:c.description,onChange:e=>m({...c,description:e.target.value}),rows:"3",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"15px",display:"flex",gap:"15px"}},(0,t.createElement)("div",{style:{flex:1}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Trigger Type"),(0,t.createElement)("select",{value:c.trigger_type,onChange:e=>m({...c,trigger_type:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("option",{value:"manual"},"Manual"),(0,t.createElement)("option",{value:"event"},"Event-triggered"))),"event"===c.trigger_type&&(0,t.createElement)("div",{style:{flex:1}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Trigger Event"),(0,t.createElement)("select",{value:c.trigger_event,onChange:e=>m({...c,trigger_event:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("option",{value:""},"Select event..."),(0,t.createElement)("option",{value:"appointment_booked"},"Appointment Booked"),(0,t.createElement)("option",{value:"program_enrolled"},"Program Enrolled"),(0,t.createElement)("option",{value:"form_submitted"},"Form Submitted")))),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},(0,t.createElement)("label",{style:{fontWeight:"bold"}},"Email Sequence"),(0,t.createElement)("button",{type:"button",onClick:()=>{m({...c,emails:[...c.emails,{subject:"",body:"",delay_days:0}]})},style:{padding:"6px 12px",background:"#00a32a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"+ Add Email")),c.emails.map((e,a)=>(0,t.createElement)("div",{key:a,style:{padding:"15px",background:"#f9f9f9",border:"1px solid #e0e0e0",borderRadius:"4px",marginBottom:"10px"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"}},(0,t.createElement)("strong",null,"Email ",a+1),c.emails.length>1&&(0,t.createElement)("button",{type:"button",onClick:()=>(e=>{const t=c.emails.filter((t,a)=>a!==e);m({...c,emails:t})})(a),style:{padding:"4px 8px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"}},"Remove")),(0,t.createElement)("div",{style:{marginBottom:"10px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontSize:"13px"}},"Delay (days)"),(0,t.createElement)("input",{type:"number",min:"0",value:e.delay_days,onChange:e=>x(a,"delay_days",parseInt(e.target.value)),style:{width:"100px",padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"10px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontSize:"13px"}},"Subject"),(0,t.createElement)("input",{type:"text",value:e.subject,onChange:e=>x(a,"subject",e.target.value),required:!0,placeholder:"Use {{first_name}}, {{last_name}}, etc.",style:{width:"100%",padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontSize:"13px"}},"Body"),(0,t.createElement)("textarea",{value:e.body,onChange:e=>x(a,"body",e.target.value),required:!0,rows:"4",placeholder:"Email content. Use merge tags: {{first_name}}, {{last_name}}, {{email}}, {{phone}}",style:{width:"100%",padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}}))))),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},(0,t.createElement)("input",{type:"checkbox",checked:c.is_active,onChange:e=>m({...c,is_active:e.target.checked}),style:{marginRight:"8px"}}),"Active")),(0,t.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,t.createElement)("button",{type:"submit",style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},s?"Update":"Create"," Campaign"),(0,t.createElement)("button",{type:"button",onClick:g,style:{padding:"10px 20px",background:"#ddd",color:"#333",border:"none",borderRadius:"4px",cursor:"pointer"}},"Cancel")))),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"}},0===e.length?(0,t.createElement)("div",{style:{padding:"40px",textAlign:"center",color:"#666"}},"No campaigns created yet"):e.map(e=>(0,t.createElement)("div",{key:e.id,style:{background:"#fff",border:"1px solid #ddd",borderRadius:"4px",padding:"20px"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"}},(0,t.createElement)("h3",{style:{margin:0}},e.name),(0,t.createElement)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",background:e.is_active?"#00aa00":"#999",color:"#fff"}},e.is_active?"Active":"Inactive")),(0,t.createElement)("p",{style:{color:"#666",fontSize:"13px",marginBottom:"15px"}},e.description||"No description"),(0,t.createElement)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"15px"}},(0,t.createElement)("div",null,"Trigger: ",e.trigger_type),(0,t.createElement)("div",null,"Emails: ",e.emails?"string"==typeof e.emails?JSON.parse(e.emails).length:e.emails.length:0)),(0,t.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,t.createElement)("button",{onClick:()=>(e=>{m({name:e.name,description:e.description||"",trigger_type:e.trigger_type,trigger_event:e.trigger_event||"",emails:"string"==typeof e.emails?JSON.parse(e.emails):e.emails,is_active:1===e.is_active}),p(e.id),o(!0)})(e),style:{padding:"6px 12px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Edit"),(0,t.createElement)("button",{onClick:()=>(async e=>{if(confirm("Delete this campaign?"))try{await d()({path:`/ppms/v1/campaigns/${e}`,method:"DELETE"}),u()}catch(e){alert("Error deleting campaign: "+e.message)}})(e.id),style:{padding:"6px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Delete"))))))},f=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[s,p]=(0,a.useState)(null),[c,m]=(0,a.useState)({title:"",description:"",meal_type:"lunch",prep_time:0,cook_time:0,servings:1,calories:0,protein:0,carbs:0,fats:0,ingredients:[""],instructions:[""],tags:"",is_public:!1});(0,a.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await d()({path:"/ppms/v1/recipes"});n(e.data||[])}catch(e){console.error("Error loading recipes:",e)}finally{r(!1)}},g=()=>{m({title:"",description:"",meal_type:"lunch",prep_time:0,cook_time:0,servings:1,calories:0,protein:0,carbs:0,fats:0,ingredients:[""],instructions:[""],tags:"",is_public:!1}),p(null),o(!1)};return l?(0,t.createElement)("div",null,"Loading recipes..."):(0,t.createElement)("div",null,(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},(0,t.createElement)("h1",null,"Recipe Library"),(0,t.createElement)("button",{onClick:()=>o(!i),style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},i?"Cancel":"Add Recipe")),i&&(0,t.createElement)("div",{style:{background:"#fff",padding:"20px",marginBottom:"20px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("h2",null,s?"Edit Recipe":"Add Recipe"),(0,t.createElement)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...c,practitioner_id:window.practicerxSettings?.currentUserId||1};s?await d()({path:`/ppms/v1/recipes/${s}`,method:"PUT",data:e}):await d()({path:"/ppms/v1/recipes",method:"POST",data:e}),g(),u()}catch(e){alert("Error saving recipe: "+e.message)}}},(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"}},(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Recipe Title"),(0,t.createElement)("input",{type:"text",value:c.title,onChange:e=>m({...c,title:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Meal Type"),(0,t.createElement)("select",{value:c.meal_type,onChange:e=>m({...c,meal_type:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("option",{value:"breakfast"},"Breakfast"),(0,t.createElement)("option",{value:"lunch"},"Lunch"),(0,t.createElement)("option",{value:"dinner"},"Dinner"),(0,t.createElement)("option",{value:"snack"},"Snack")))),(0,t.createElement)("div",{style:{marginTop:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Description"),(0,t.createElement)("textarea",{value:c.description,onChange:e=>m({...c,description:e.target.value}),rows:"2",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"15px",marginTop:"15px"}},(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Prep Time (min)"),(0,t.createElement)("input",{type:"number",value:c.prep_time,onChange:e=>m({...c,prep_time:parseInt(e.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Cook Time (min)"),(0,t.createElement)("input",{type:"number",value:c.cook_time,onChange:e=>m({...c,cook_time:parseInt(e.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Servings"),(0,t.createElement)("input",{type:"number",value:c.servings,onChange:e=>m({...c,servings:parseInt(e.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}}))),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"15px",marginTop:"15px"}},(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Calories"),(0,t.createElement)("input",{type:"number",value:c.calories,onChange:e=>m({...c,calories:parseInt(e.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Protein (g)"),(0,t.createElement)("input",{type:"number",step:"0.1",value:c.protein,onChange:e=>m({...c,protein:parseFloat(e.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Carbs (g)"),(0,t.createElement)("input",{type:"number",step:"0.1",value:c.carbs,onChange:e=>m({...c,carbs:parseFloat(e.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Fats (g)"),(0,t.createElement)("input",{type:"number",step:"0.1",value:c.fats,onChange:e=>m({...c,fats:parseFloat(e.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}}))),(0,t.createElement)("div",{style:{marginTop:"15px"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},(0,t.createElement)("label",{style:{fontWeight:"bold"}},"Ingredients"),(0,t.createElement)("button",{type:"button",onClick:()=>{m({...c,ingredients:[...c.ingredients,""]})},style:{padding:"6px 12px",background:"#00a32a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"+ Add")),c.ingredients.map((e,a)=>(0,t.createElement)("div",{key:a,style:{display:"flex",gap:"10px",marginBottom:"8px"}},(0,t.createElement)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const a=[...c.ingredients];a[e]=t,m({...c,ingredients:a})})(a,e.target.value),placeholder:"e.g., 1 cup flour",style:{flex:1,padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}}),c.ingredients.length>1&&(0,t.createElement)("button",{type:"button",onClick:()=>(e=>{const t=c.ingredients.filter((t,a)=>a!==e);m({...c,ingredients:t})})(a),style:{padding:"6px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"âœ•")))),(0,t.createElement)("div",{style:{marginTop:"15px"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},(0,t.createElement)("label",{style:{fontWeight:"bold"}},"Instructions"),(0,t.createElement)("button",{type:"button",onClick:()=>{m({...c,instructions:[...c.instructions,""]})},style:{padding:"6px 12px",background:"#00a32a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"+ Add")),c.instructions.map((e,a)=>(0,t.createElement)("div",{key:a,style:{display:"flex",gap:"10px",marginBottom:"8px"}},(0,t.createElement)("span",{style:{padding:"6px 10px",background:"#f0f0f0",borderRadius:"4px"}},a+1),(0,t.createElement)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const a=[...c.instructions];a[e]=t,m({...c,instructions:a})})(a,e.target.value),placeholder:"Step instructions",style:{flex:1,padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}}),c.instructions.length>1&&(0,t.createElement)("button",{type:"button",onClick:()=>(e=>{const t=c.instructions.filter((t,a)=>a!==e);m({...c,instructions:t})})(a),style:{padding:"6px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"âœ•")))),(0,t.createElement)("div",{style:{marginTop:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Tags (comma-separated)"),(0,t.createElement)("input",{type:"text",value:c.tags,onChange:e=>m({...c,tags:e.target.value}),placeholder:"e.g., vegan, gluten-free, high-protein",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginTop:"15px"}},(0,t.createElement)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},(0,t.createElement)("input",{type:"checkbox",checked:c.is_public,onChange:e=>m({...c,is_public:e.target.checked}),style:{marginRight:"8px"}}),"Make Public (visible to all clients)")),(0,t.createElement)("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},(0,t.createElement)("button",{type:"submit",style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},s?"Update":"Create"," Recipe"),(0,t.createElement)("button",{type:"button",onClick:g,style:{padding:"10px 20px",background:"#ddd",color:"#333",border:"none",borderRadius:"4px",cursor:"pointer"}},"Cancel")))),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"}},0===e.length?(0,t.createElement)("div",{style:{padding:"40px",textAlign:"center",color:"#666"}},"No recipes in library"):e.map(e=>(0,t.createElement)("div",{key:e.id,style:{background:"#fff",border:"1px solid #ddd",borderRadius:"4px",padding:"20px"}},(0,t.createElement)("h3",{style:{margin:"0 0 10px 0"}},e.title),(0,t.createElement)("div",{style:{fontSize:"12px",color:"#fff",background:"#666",padding:"4px 8px",borderRadius:"4px",display:"inline-block",marginBottom:"10px"}},e.meal_type),(0,t.createElement)("p",{style:{color:"#666",fontSize:"13px",marginBottom:"10px"}},e.description||"No description"),(0,t.createElement)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"10px"}},(0,t.createElement)("div",null,"ðŸ• Prep: ",e.prep_time,"m | Cook: ",e.cook_time,"m"),(0,t.createElement)("div",null,"ðŸ½ï¸ Servings: ",e.servings),(0,t.createElement)("div",null,"âš¡ ",e.calories," cal | P: ",e.protein,"g | C: ",e.carbs,"g | F: ",e.fats,"g")),(0,t.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,t.createElement)("button",{onClick:()=>(e=>{m({title:e.title,description:e.description||"",meal_type:e.meal_type,prep_time:e.prep_time,cook_time:e.cook_time,servings:e.servings,calories:e.calories,protein:e.protein,carbs:e.carbs,fats:e.fats,ingredients:e.ingredients||[""],instructions:e.instructions||[""],tags:e.tags||"",is_public:1===e.is_public}),p(e.id),o(!0)})(e),style:{padding:"6px 12px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Edit"),(0,t.createElement)("button",{onClick:()=>(async e=>{if(confirm("Delete this recipe?"))try{await d()({path:`/ppms/v1/recipes/${e}`,method:"DELETE"}),u()}catch(e){alert("Error deleting recipe: "+e.message)}})(e.id),style:{padding:"6px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Delete"))))))},v=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0);(0,a.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await d()({path:"/ppms/v1/meal-plans"});n(e.data||[])}catch(e){console.error("Error loading meal plans:",e)}finally{r(!1)}};return l?(0,t.createElement)("div",null,"Loading meal plans..."):(0,t.createElement)("div",null,(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},(0,t.createElement)("h1",null,"Meal Plans"),(0,t.createElement)("button",{onClick:()=>alert("Meal plan builder coming soon!"),style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"Create Meal Plan")),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"}},0===e.length?(0,t.createElement)("div",{style:{padding:"40px",textAlign:"center",color:"#666"}},"No meal plans created"):e.map(e=>(0,t.createElement)("div",{key:e.id,style:{background:"#fff",border:"1px solid #ddd",borderRadius:"4px",padding:"20px"}},(0,t.createElement)("h3",{style:{margin:"0 0 10px 0"}},e.name),(0,t.createElement)("p",{style:{color:"#666",fontSize:"13px",marginBottom:"15px"}},e.description||"No description"),(0,t.createElement)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"15px"}},(0,t.createElement)("div",null,"Duration: ",e.duration_days," days"),(0,t.createElement)("div",null,"Target: ",e.calories_target||0," calories/day"),1===e.is_template&&(0,t.createElement)("div",{style:{marginTop:"5px",padding:"4px 8px",background:"#0073aa",color:"#fff",borderRadius:"4px",display:"inline-block"}},"Template")),(0,t.createElement)("button",{onClick:()=>alert("View plan details coming soon!"),style:{padding:"6px 12px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"View Plan")))))},h=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[s,p]=(0,a.useState)(null),[c,m]=(0,a.useState)({name:"",description:"",form_type:"intake",fields:[{name:"",type:"text",label:"",required:!1,options:""}]});(0,a.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await d()({path:"/ppms/v1/forms"});n(e.data||[])}catch(e){console.error("Error loading forms:",e)}finally{r(!1)}},g=()=>{m({name:"",description:"",form_type:"intake",fields:[{name:"",type:"text",label:"",required:!1,options:""}]}),p(null),o(!1)},x=(e,t,a)=>{const n=[...c.fields];n[e][t]=a,m({...c,fields:n})};return l?(0,t.createElement)("div",null,"Loading forms..."):(0,t.createElement)("div",null,(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},(0,t.createElement)("h1",null,"Forms Builder"),(0,t.createElement)("button",{onClick:()=>o(!i),style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},i?"Cancel":"Create Form")),i&&(0,t.createElement)("div",{style:{background:"#fff",padding:"20px",marginBottom:"20px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("h2",null,s?"Edit Form":"Create Form"),(0,t.createElement)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...c,practitioner_id:window.practicerxSettings?.currentUserId||1};s?await d()({path:`/ppms/v1/forms/${s}`,method:"PUT",data:e}):await d()({path:"/ppms/v1/forms",method:"POST",data:e}),g(),u()}catch(e){alert("Error saving form: "+e.message)}}},(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Form Name"),(0,t.createElement)("input",{type:"text",value:c.name,onChange:e=>m({...c,name:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Description"),(0,t.createElement)("textarea",{value:c.description,onChange:e=>m({...c,description:e.target.value}),rows:"2",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Form Type"),(0,t.createElement)("select",{value:c.form_type,onChange:e=>m({...c,form_type:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("option",{value:"intake"},"Intake Form"),(0,t.createElement)("option",{value:"assessment"},"Assessment"),(0,t.createElement)("option",{value:"questionnaire"},"Questionnaire"),(0,t.createElement)("option",{value:"consent"},"Consent Form"))),(0,t.createElement)("div",{style:{marginBottom:"15px"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},(0,t.createElement)("label",{style:{fontWeight:"bold"}},"Form Fields"),(0,t.createElement)("button",{type:"button",onClick:()=>{m({...c,fields:[...c.fields,{name:"",type:"text",label:"",required:!1,options:""}]})},style:{padding:"6px 12px",background:"#00a32a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"+ Add Field")),c.fields.map((e,a)=>(0,t.createElement)("div",{key:a,style:{padding:"15px",background:"#f9f9f9",border:"1px solid #e0e0e0",borderRadius:"4px",marginBottom:"10px"}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"}},(0,t.createElement)("strong",null,"Field ",a+1),c.fields.length>1&&(0,t.createElement)("button",{type:"button",onClick:()=>(e=>{const t=c.fields.filter((t,a)=>a!==e);m({...c,fields:t})})(a),style:{padding:"4px 8px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"}},"Remove")),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"}},(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontSize:"13px"}},"Field Name"),(0,t.createElement)("input",{type:"text",value:e.name,onChange:e=>x(a,"name",e.target.value),required:!0,placeholder:"e.g., first_name",style:{width:"100%",padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontSize:"13px"}},"Field Type"),(0,t.createElement)("select",{value:e.type,onChange:e=>x(a,"type",e.target.value),style:{width:"100%",padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("option",{value:"text"},"Text"),(0,t.createElement)("option",{value:"email"},"Email"),(0,t.createElement)("option",{value:"number"},"Number"),(0,t.createElement)("option",{value:"textarea"},"Textarea"),(0,t.createElement)("option",{value:"select"},"Dropdown"),(0,t.createElement)("option",{value:"radio"},"Radio"),(0,t.createElement)("option",{value:"checkbox"},"Checkbox"),(0,t.createElement)("option",{value:"date"},"Date")))),(0,t.createElement)("div",{style:{marginTop:"10px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontSize:"13px"}},"Label"),(0,t.createElement)("input",{type:"text",value:e.label,onChange:e=>x(a,"label",e.target.value),required:!0,placeholder:"Display label for field",style:{width:"100%",padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}})),["select","radio","checkbox"].includes(e.type)&&(0,t.createElement)("div",{style:{marginTop:"10px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px",fontSize:"13px"}},"Options (comma-separated)"),(0,t.createElement)("input",{type:"text",value:e.options,onChange:e=>x(a,"options",e.target.value),placeholder:"e.g., Option 1, Option 2, Option 3",style:{width:"100%",padding:"6px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",{style:{marginTop:"10px"}},(0,t.createElement)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},(0,t.createElement)("input",{type:"checkbox",checked:e.required,onChange:e=>x(a,"required",e.target.checked),style:{marginRight:"8px"}}),"Required field"))))),(0,t.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,t.createElement)("button",{type:"submit",style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},s?"Update":"Create"," Form"),(0,t.createElement)("button",{type:"button",onClick:g,style:{padding:"10px 20px",background:"#ddd",color:"#333",border:"none",borderRadius:"4px",cursor:"pointer"}},"Cancel")))),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"}},0===e.length?(0,t.createElement)("div",{style:{padding:"40px",textAlign:"center",color:"#666"}},"No forms created yet"):e.map(e=>(0,t.createElement)("div",{key:e.id,style:{background:"#fff",border:"1px solid #ddd",borderRadius:"4px",padding:"20px"}},(0,t.createElement)("h3",{style:{margin:"0 0 10px 0"}},e.name),(0,t.createElement)("div",{style:{fontSize:"12px",color:"#fff",background:"#666",padding:"4px 8px",borderRadius:"4px",display:"inline-block",marginBottom:"10px"}},e.form_type),(0,t.createElement)("p",{style:{color:"#666",fontSize:"13px",marginBottom:"10px"}},e.description||"No description"),(0,t.createElement)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"15px"}},"Fields: ",e.fields?"string"==typeof e.fields?JSON.parse(e.fields).length:e.fields.length:0),(0,t.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,t.createElement)("button",{onClick:()=>(e=>{m({name:e.name,description:e.description||"",form_type:e.form_type,fields:"string"==typeof e.fields?JSON.parse(e.fields):e.fields}),p(e.id),o(!0)})(e),style:{padding:"6px 12px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Edit"),(0,t.createElement)("button",{onClick:()=>(async e=>{if(confirm("Delete this form?"))try{await d()({path:`/ppms/v1/forms/${e}`,method:"DELETE"}),u()}catch(e){alert("Error deleting form: "+e.message)}})(e.id),style:{padding:"6px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Delete"))))))},k=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0);(0,a.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await d()({path:"/ppms/v1/documents"});n(e.data||[])}catch(e){console.error("Error loading documents:",e)}finally{r(!1)}};return l?(0,t.createElement)("div",null,"Loading documents..."):(0,t.createElement)("div",null,(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},(0,t.createElement)("h1",null,"Document Library"),(0,t.createElement)("button",{onClick:()=>alert("Document upload coming soon!"),style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"Upload Document")),(0,t.createElement)("div",{style:{background:"#fff",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden"}},(0,t.createElement)("table",{style:{width:"100%",borderCollapse:"collapse"}},(0,t.createElement)("thead",null,(0,t.createElement)("tr",{style:{background:"#f7f7f7"}},(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Name"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Type"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Client"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Size"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Uploaded"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Actions"))),(0,t.createElement)("tbody",null,0===e.length?(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:"6",style:{padding:"20px",textAlign:"center",color:"#666"}},"No documents uploaded")):e.map(e=>{return(0,t.createElement)("tr",{key:e.id,style:{borderBottom:"1px solid #f0f0f0"}},(0,t.createElement)("td",{style:{padding:"12px"}},(0,t.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(0,t.createElement)("span",null,"ðŸ“„"),(0,t.createElement)("span",null,e.file_name))),(0,t.createElement)("td",{style:{padding:"12px"}},(0,t.createElement)("span",{style:{padding:"4px 8px",background:"#f0f0f0",borderRadius:"4px",fontSize:"11px"}},e.document_type)),(0,t.createElement)("td",{style:{padding:"12px"}},"Client #",e.client_id),(0,t.createElement)("td",{style:{padding:"12px"}},(a=e.file_size||0)<1024?a+" B":a<1048576?(a/1024).toFixed(1)+" KB":(a/1048576).toFixed(1)+" MB"),(0,t.createElement)("td",{style:{padding:"12px"}},e.created_at),(0,t.createElement)("td",{style:{padding:"12px"}},(0,t.createElement)("div",{style:{display:"flex",gap:"8px"}},(0,t.createElement)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",style:{padding:"4px 12px",background:"#0073aa",color:"#fff",borderRadius:"4px",textDecoration:"none",fontSize:"12px"}},"View"),(0,t.createElement)("button",{onClick:()=>(async e=>{if(confirm("Delete this document?"))try{await d()({path:`/ppms/v1/documents/${e}`,method:"DELETE"}),i()}catch(e){alert("Error deleting document: "+e.message)}})(e.id),style:{padding:"4px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Delete"))));var a})))))},S=()=>{const[e,n]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[s,p]=(0,a.useState)({client_id:"",metric_type:"weight",value:"",unit:"kg",notes:""});(0,a.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await d()({path:"/ppms/v1/health-metrics"});n(e.data||[])}catch(e){console.error("Error loading metrics:",e)}finally{r(!1)}};return l?(0,t.createElement)("div",null,"Loading health metrics..."):(0,t.createElement)("div",null,(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}},(0,t.createElement)("h1",null,"Health Tracking"),(0,t.createElement)("button",{onClick:()=>o(!i),style:{padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},i?"Cancel":"Record Metric")),i&&(0,t.createElement)("div",{style:{background:"#fff",padding:"20px",marginBottom:"20px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("h2",null,"Record Health Metric"),(0,t.createElement)("form",{onSubmit:async e=>{e.preventDefault();try{await d()({path:"/ppms/v1/health-metrics",method:"POST",data:s}),o(!1),p({client_id:"",metric_type:"weight",value:"",unit:"kg",notes:""}),c()}catch(e){alert("Error recording metric: "+e.message)}}},(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"}},(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Client ID"),(0,t.createElement)("input",{type:"number",value:s.client_id,onChange:e=>p({...s,client_id:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Metric Type"),(0,t.createElement)("select",{value:s.metric_type,onChange:e=>p({...s,metric_type:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}},(0,t.createElement)("option",{value:"weight"},"Weight"),(0,t.createElement)("option",{value:"blood_pressure"},"Blood Pressure"),(0,t.createElement)("option",{value:"heart_rate"},"Heart Rate"),(0,t.createElement)("option",{value:"temperature"},"Temperature"),(0,t.createElement)("option",{value:"blood_sugar"},"Blood Sugar"),(0,t.createElement)("option",{value:"cholesterol"},"Cholesterol"),(0,t.createElement)("option",{value:"other"},"Other")))),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"15px",marginTop:"15px"}},(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Value"),(0,t.createElement)("input",{type:"text",value:s.value,onChange:e=>p({...s,value:e.target.value}),required:!0,placeholder:"e.g., 70 or 120/80",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("div",null,(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Unit"),(0,t.createElement)("input",{type:"text",value:s.unit,onChange:e=>p({...s,unit:e.target.value}),placeholder:"e.g., kg, mmHg",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}}))),(0,t.createElement)("div",{style:{marginTop:"15px"}},(0,t.createElement)("label",{style:{display:"block",marginBottom:"5px"}},"Notes (optional)"),(0,t.createElement)("textarea",{value:s.notes,onChange:e=>p({...s,notes:e.target.value}),rows:"3",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),(0,t.createElement)("button",{type:"submit",style:{marginTop:"15px",padding:"10px 20px",background:"#0073aa",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"Record Metric"))),(0,t.createElement)("div",{style:{background:"#fff",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden"}},(0,t.createElement)("table",{style:{width:"100%",borderCollapse:"collapse"}},(0,t.createElement)("thead",null,(0,t.createElement)("tr",{style:{background:"#f7f7f7"}},(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Type"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Client"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Value"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Unit"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Recorded"),(0,t.createElement)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},"Actions"))),(0,t.createElement)("tbody",null,0===e.length?(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:"6",style:{padding:"20px",textAlign:"center",color:"#666"}},"No health metrics recorded")):e.map(e=>(0,t.createElement)("tr",{key:e.id,style:{borderBottom:"1px solid #f0f0f0"}},(0,t.createElement)("td",{style:{padding:"12px"}},(0,t.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},(0,t.createElement)("span",null,{weight:"âš–ï¸",blood_pressure:"ðŸ’‰",heart_rate:"â¤ï¸",temperature:"ðŸŒ¡ï¸",blood_sugar:"ðŸ©¸",cholesterol:"ðŸ“Š",other:"ðŸ“ˆ"}[e.metric_type]||"ðŸ“Š"),(0,t.createElement)("span",null,e.metric_type.replace("_"," ")))),(0,t.createElement)("td",{style:{padding:"12px"}},"Client #",e.client_id),(0,t.createElement)("td",{style:{padding:"12px",fontWeight:"bold"}},e.value),(0,t.createElement)("td",{style:{padding:"12px"}},e.unit),(0,t.createElement)("td",{style:{padding:"12px"}},e.recorded_at),(0,t.createElement)("td",{style:{padding:"12px"}},(0,t.createElement)("button",{onClick:()=>(async e=>{if(confirm("Delete this metric?"))try{await d()({path:`/ppms/v1/health-metrics/${e}`,method:"DELETE"}),c()}catch(e){alert("Error deleting metric: "+e.message)}})(e.id),style:{padding:"4px 12px",background:"#dc3232",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"Delete"))))))),e.length>0&&(0,t.createElement)("div",{style:{marginTop:"20px",padding:"20px",background:"#fff",border:"1px solid #ddd",borderRadius:"4px",textAlign:"center",color:"#666"}},"ðŸ“Š Interactive charts and trend analysis coming soon"))},C=()=>(0,t.createElement)("header",{style:{background:"#fff",borderBottom:"1px solid #eee",padding:12}},(0,t.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},(0,t.createElement)("div",{style:{fontWeight:600}},"Client Portal"),(0,t.createElement)("div",null,(0,t.createElement)("a",{href:"#",style:{color:"#0073aa",textDecoration:"none"}},"Logout")))),w=()=>(0,t.createElement)("aside",{className:"client-sidebar",style:{width:240,background:"#fafafa",borderRight:"1px solid #e5e5e5",padding:20}},(0,t.createElement)("h3",null,"PracticeRx"),(0,t.createElement)("nav",null,(0,t.createElement)("ul",{style:{listStyle:"none",padding:0}},(0,t.createElement)("li",{style:{marginBottom:10}},(0,t.createElement)(r,{to:"/client"},"Dashboard")),(0,t.createElement)("li",{style:{marginBottom:10}},(0,t.createElement)(r,{to:"/client/appointments"},"Appointments")),(0,t.createElement)("li",{style:{marginBottom:10}},(0,t.createElement)(r,{to:"/client/documents"},"Documents")),(0,t.createElement)("li",{style:{marginBottom:10}},(0,t.createElement)(r,{to:"/client/billing"},"Billing")),(0,t.createElement)("li",{style:{marginTop:20}},(0,t.createElement)(r,{to:"/"},"Back to Admin"))))),B=({children:e})=>(0,t.createElement)("div",{className:"client-layout",style:{display:"flex",minHeight:"100vh"}},(0,t.createElement)(w,null),(0,t.createElement)("div",{className:"client-content",style:{flex:1}},(0,t.createElement)(C,null),(0,t.createElement)("main",{style:{padding:20}},e))),_=()=>{const[e,n]=(0,a.useState)(null),[l,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)("");return(0,a.useEffect)(()=>{const e=localStorage.getItem("ppms_token"),t={"Content-Type":"application/json"};e&&(t.Authorization="Bearer "+e),fetch(practicerxSettings.root+"appointments/client",{method:"GET",headers:t}).then(async e=>{if(!e.ok){const t=await e.json().catch(()=>({}));return o(t.message||"Failed to load appointments"),void r(!1)}const t=await e.json();n(t),r(!1)}).catch(()=>{o("Network error"),r(!1)})},[]),(0,t.createElement)(B,null,(0,t.createElement)("div",{style:{padding:20}},(0,t.createElement)("h1",null,"My Appointments"),l&&(0,t.createElement)("div",null,"Loadingâ€¦"),i&&(0,t.createElement)("div",{style:{color:"red"}},i),!l&&!i&&(0,t.createElement)("div",null,Array.isArray(e)&&e.length?(0,t.createElement)("ul",{style:{listStyle:"none",padding:0}},e.map(e=>(0,t.createElement)("li",{key:e.id,style:{padding:12,borderBottom:"1px solid #eee"}},(0,t.createElement)("div",{style:{fontWeight:600}},e.title||"Appointment"),(0,t.createElement)("div",null,new Date(e.start_time).toLocaleString()),(0,t.createElement)("div",{style:{color:"#666"}},e.status)))):(0,t.createElement)("div",null,"No appointments found."))))},R=()=>{const[e,l]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),{navigate:s}=(0,a.useContext)(n);return(0,t.createElement)("div",{style:{padding:20}},(0,t.createElement)("h2",null,"Client Login"),(0,t.createElement)("form",{onSubmit:async t=>{t.preventDefault(),d("");try{const t=await fetch(practicerxSettings.root+"auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),a=await t.json();if(!t.ok)return void d(a.message||"Login failed");localStorage.setItem("ppms_token",a.token),s("/client")}catch(e){d("Network error")}}},(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Email"),(0,t.createElement)("input",{type:"email",value:e,onChange:e=>l(e.target.value)})),(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Password"),(0,t.createElement)("input",{type:"password",value:r,onChange:e=>i(e.target.value)})),o&&(0,t.createElement)("div",{style:{color:"red"}},o),(0,t.createElement)("button",{type:"submit"},"Login")))},T=()=>{const[e,l]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[s,p]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),{navigate:u}=(0,a.useContext)(n);return(0,t.createElement)("div",{style:{padding:20}},(0,t.createElement)("h2",null,"Client Register"),(0,t.createElement)("form",{onSubmit:async t=>{t.preventDefault(),m("");try{const t=await fetch(practicerxSettings.root+"auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,first_name:r,last_name:o,password:s})}),a=await t.json();if(!t.ok)return void m(a.message||"Registration failed");localStorage.setItem("ppms_token",a.token),u("/client")}catch(e){m("Network error")}}},(0,t.createElement)("div",null,(0,t.createElement)("label",null,"First name"),(0,t.createElement)("input",{value:r,onChange:e=>i(e.target.value)})),(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Last name"),(0,t.createElement)("input",{value:o,onChange:e=>d(e.target.value)})),(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Email"),(0,t.createElement)("input",{type:"email",value:e,onChange:e=>l(e.target.value)})),(0,t.createElement)("div",null,(0,t.createElement)("label",null,"Password"),(0,t.createElement)("input",{type:"password",value:s,onChange:e=>p(e.target.value)})),c&&(0,t.createElement)("div",{style:{color:"red"}},c),(0,t.createElement)("button",{type:"submit"},"Register")))},N=document.getElementById("practicerx-root");N&&(0,a.render)((0,t.createElement)(()=>(0,t.createElement)(l,null,(0,t.createElement)(n.Consumer,null,({path:e})=>{let a;return a="/"===e?(0,t.createElement)(s,null):"/appointments"===e?(0,t.createElement)(c,null):"/patients"===e?(0,t.createElement)(u,null):e.startsWith("/patients/")?(0,t.createElement)(x,{id:e.split("/")[2]}):"/telehealth"===e?(0,t.createElement)(E,null):"/campaigns"===e?(0,t.createElement)(b,null):"/recipes"===e?(0,t.createElement)(f,null):"/meal-plans"===e?(0,t.createElement)(v,null):"/forms"===e?(0,t.createElement)(h,null):"/documents"===e?(0,t.createElement)(k,null):"/health-tracking"===e?(0,t.createElement)(S,null):"/settings"===e?(0,t.createElement)(y,null):"/client"===e||"/client/"===e?(0,t.createElement)(_,null):"/client/login"===e?(0,t.createElement)(R,null):"/client/register"===e?(0,t.createElement)(T,null):e.startsWith("/client/")?(0,t.createElement)(_,null):(0,t.createElement)("div",null,"Page not found"),(0,t.createElement)(i,null,a)})),null),N)})();